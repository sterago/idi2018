version: '3'
services:
  gitlab-server:
    network_mode: bridge
    image: "gitlab/gitlab-ce:latest"
    hostname: "gitlab"
    ports:
     - "443:443"
     - "80:80"
    volumes:
     - "/Users/srago/work/idi2018/gitlab/config:/etc/gitlab"
     - "/Users/srago/work/idi2018/gitlab/logs:/var/log/gitlab"
     - "/Users/srago/work/idi2018/gitlab/data:/var/opt/gitlab"
  gitlab-runner:
    network_mode: bridge
    image: "gitlab/gitlab-runner:latest"
    volumes:
     - "/Users/srago/work/idi2018/gitlab-runner/config:/etc/gitlab-runner"
     - "/var/run/docker.sock:/var/run/docker.sock"
    depends_on:
     - gitlab-server
    links:
     - gitlab-server
     - selenium-grid
  selenium-grid:
    network_mode: bridge
    hostname: "selenium-grid"
    image: "selenium/standalone-chrome-debug:3.9.1-actinium"
    ports:
     - "4444:4444"
     - "5900:5900"
    volumes:
     - "/dev/shm:/dev/shm"

#  2241  sudo docker run --detach     --hostname gitlab     --publish 443:443 --publish 80:80 --publish 22:22     --name gitlab     --restart always     --volume /Users/srago/work/idi2018/gitlab/config:/etc/gitlab     --volume /Users/srago/work/idi2018/gitlab/logs:/var/log/gitlab     --volume /Users/srago/work/idi2018/gitlab/data:/var/opt/gitlab     gitlab/gitlab-ce:latest
#  2295  docker run -d --name gitlab-runner --restart always -v /Users/srago/work/idi2018/gitlab-runner/config:/etc/gitlab-runner -v /var/run/docker.sock:/var/run/docker.sock gitlab/gitlab-runner:latest
#  2262  docker run -d -p 4444:4444 -p 5900:5900 -v /dev/shm:/dev/shm selenium/standalone-chrome-debug:3.9.1-actinium
